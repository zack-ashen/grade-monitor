(this["webpackJsonpgrade-monitor"]=this["webpackJsonpgrade-monitor"]||[]).push([[0],{22:function(e,t,s){},35:function(e,t,s){},38:function(e,t,s){},48:function(e,t,s){},49:function(e,t,s){},60:function(e,t,s){},61:function(e,t,s){},64:function(e,t,s){},65:function(e,t,s){},66:function(e,t,s){},67:function(e,t,s){},68:function(e,t,s){},69:function(e,t,s){},70:function(e,t,s){"use strict";s.r(t);var a=s(2),n=s.n(a),i=s(27),r=s.n(i),o=(s(48),s(43)),c=(s(49),s(35),s(23));s(36),s(71);c.a.initializeApp({apiKey:"AIzaSyC8pGUbSqoBSn5ju472mJbJ_XkZEj6ltyI",authDomain:"grade-monitor-424a1.firebaseapp.com",projectId:"grade-monitor-424a1",storageBucket:"grade-monitor-424a1.appspot.com",messagingSenderId:"430105818915",appId:"1:430105818915:web:8de01224017a4dfda83e96",measurementId:"G-EQ1J7ZRLQB"});var l=c.a.auth(),d=c.a.firestore(),u=new c.a.auth.GoogleAuthProvider,h=s(7),p=(s(22),s(1));var b=function(){var e=Object(h.f)();return Object(p.jsx)("button",{onClick:function(){return l.signInWithPopup(u).then((function(t){var s=t.user;d.collection("users").doc(l.currentUser.uid).get().then((function(e){if(e.exists)return console.log("user already exists"),s;d.collection("users").doc(l.currentUser.uid).set({name:s.displayName}).then((function(){console.log("Document successfully written!")})).catch((function(e){console.error("Error writing document: ",e)}))})),e.push("/classes")})).catch((function(e){var t=e.code,s=e.message,a=e.email;console.error(t+s+a)}))},id:"sign_in",children:"Login"})};var g=s(31),m=s(10),j=s(11),v=s(5),O=s(12),f=s(13),w=s(26),x=s.n(w);s(60);var C=function(e){var t=Object(h.f)();return Object(p.jsx)("button",{onClick:function(){return c.a.auth().signOut().then((function(){console.log("Logged Out!"),t.push("/")})).catch((function(e){}))},id:"sign_out",children:e.text})},_=s(41),N=s.n(_),y=function(e){var t=e.onClickOutside,s=e.onKeyDown,a=e.modalRef,n=e.children;return r.a.createPortal(Object(p.jsx)(N.a,{children:Object(p.jsx)("aside",{tag:"aside",role:"dialog",tabIndex:"-1","aria-modal":"true",className:"modal-cover",onClick:t,onKeyDown:s,children:Object(p.jsx)("div",{className:"modal-area",ref:a,children:Object(p.jsx)("div",{className:"modal-body",children:n})})})}),document.body)},k=(s(61),function(e){Object(O.a)(s,e);var t=Object(f.a)(s);function s(){var e;Object(m.a)(this,s);for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).state={isShown:!1},e.showModal=function(){e.setState({isShown:!0}),e.toggleScrollLock()},e.closeModal=function(){e.setState({isShown:!1}),e.TriggerButton.focus(),e.toggleScrollLock()},e.onKeyDown=function(t){27===t.keyCode&&e.closeModal()},e.onClickOutside=function(t){e.modal&&e.modal.contains(t.target)||e.closeModal()},e.toggleScrollLock=function(){document.querySelector("html").classList.toggle("scroll-lock")},e}return Object(j.a)(s,[{key:"render",value:function(){var e=this;return Object(p.jsxs)(n.a.Fragment,{children:[Object(p.jsx)("button",{className:this.props.buttonStyle,ref:function(t){return e.TriggerButton=t},onClick:this.showModal,children:this.props.triggerText}),this.state.isShown?Object(p.jsx)(y,{modalRef:function(t){return e.modal=t},onKeyDown:this.onKeyDown,onClickOutside:this.onClickOutside,children:this.props.children}):null]})}}]),s}(n.a.Component)),S=k,G=s(15),W=s(16),D=function(e){Object(O.a)(s,e);var t=Object(f.a)(s);function s(e){var a;return Object(m.a)(this,s),(a=t.call(this,e)).state={newClassValue:"",width:window.innerWidth},a.handleChange=a.handleChange.bind(Object(v.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(v.a)(a)),a.handleResize=a.handleResize.bind(Object(v.a)(a)),a.modalContainer=n.a.createRef(),a}return Object(j.a)(s,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.handleResize)}},{key:"handleResize",value:function(){this.setState({width:window.innerWidth})}},{key:"handleChange",value:function(e){this.setState({newClassValue:e.target.value})}},{key:"handleSubmit",value:function(e){this.modalContainer.current.closeModal(),d.collection("users").doc(l.currentUser.uid).collection("classes").doc(this.state.newClassValue).set({name:this.state.newClassValue,grade:100,weight_groups:[{id:0,name:"Homework",grade:100,weight:100,assignments:[{name:"Example Assignment",points_earned:20,points_possible:20}]}]}),this.setState({newClassValue:""}),this.props.addClass(this.state.newClassValue),e.preventDefault()}},{key:"render",value:function(){var e=this,t="Add Class",s="Logout";return this.state.width<=1090&&(t=Object(p.jsx)(G.a,{icon:W.c}),s=Object(p.jsx)(G.a,{icon:W.d})),Object(p.jsxs)("div",{className:"Nav",children:[Object(p.jsx)("h1",{className:"navHeader",children:"Grade Monitor"}),Object(p.jsxs)("div",{id:"button-container",children:[Object(p.jsxs)(S,{triggerText:t,buttonStyle:"add_class",ref:this.modalContainer,children:[Object(p.jsxs)("div",{id:"modal_header",children:[Object(p.jsx)("h2",{id:"form_title",children:"Add a Class"}),Object(p.jsx)("button",{onClick:function(){return e.modalContainer.current.closeModal()},id:"exit_button",children:Object(p.jsx)(G.a,{icon:W.e})})]}),Object(p.jsxs)("form",{onSubmit:this.handleSubmit,id:"class_form",children:[Object(p.jsxs)("label",{children:[Object(p.jsxs)("span",{id:"input_title",children:["Class Name",Object(p.jsx)("br",{})]}),Object(p.jsx)("input",{type:"text",id:"class_name_input",value:this.state.newClassValue,placeholder:"Ex. MATH 1110",onChange:this.handleChange})]}),Object(p.jsx)("input",{type:"submit",value:"Finish",className:"finishButton",id:"submit"})]})]}),Object(p.jsx)(C,{text:s})]})]})}}]),s}(n.a.Component),B=(s(64),function(e){Object(O.a)(s,e);var t=Object(f.a)(s);function s(){return Object(m.a)(this,s),t.apply(this,arguments)}return Object(j.a)(s,[{key:"render",value:function(){var e=this;return Object(p.jsx)("div",{className:"courseNavContainer",children:this.props.classes.map((function(t){return t===e.props.curClass?Object(p.jsx)("button",{id:"course_button_active",children:t},t):Object(p.jsx)("button",{id:"course_button",value:t,onClick:e.props.setCurClass,children:t},t)}))})}}]),s}(n.a.Component)),A=s(42),M=(s(65),function(e){Object(O.a)(s,e);var t=Object(f.a)(s);function s(e){var a;return Object(m.a)(this,s),(a=t.call(this,e)).state={id:a.props.id,assignment_name:a.props.assignment.name,points_earned:a.props.assignment.points_earned,points_possible:a.props.assignment.points_possible,grade:a.setGrade(a.props.assignment.points_earned,a.props.assignment.points_possible)},a.updateAssignmentName=a.updateAssignmentName.bind(Object(v.a)(a)),a.updatePointsEarned=a.updatePointsEarned.bind(Object(v.a)(a)),a.updatePointsPossible=a.updatePointsPossible.bind(Object(v.a)(a)),a.onBlur=a.onBlur.bind(Object(v.a)(a)),a}return Object(j.a)(s,[{key:"componentDidUpdate",value:function(e,t){e.assignment!==this.props.assignment&&this.setState({id:this.props.id,assignment_name:this.props.assignment.name,points_earned:this.props.assignment.points_earned,points_possible:this.props.assignment.points_possible,grade:this.setGrade(this.props.assignment.points_earned,this.props.assignment.points_possible)})}},{key:"setGrade",value:function(e,t){return isNaN(e)&&(e=0),isNaN(t)&&(t=1),e/t*100}},{key:"updateAssignmentName",value:function(e){var t=e.target.value;this.setState({assignment_name:t});var s={id:this.state.id,name:t,points_possible:this.state.points_possible,points_earned:this.state.points_earned};this.props.updateWeightGrade(s)}},{key:"updatePointsEarned",value:function(e){var t=parseInt(e.target.value),s=this.setGrade(t,this.props.points_possible);this.setState({points_earned:t,grade:s});var a={id:this.state.id,name:this.state.assignment_name,points_possible:this.state.points_possible,points_earned:t};this.props.updateWeightGrade(a)}},{key:"updatePointsPossible",value:function(e){var t=parseInt(e.target.value),s=this.setGrade(this.props.points_earned,t);this.setState({points_possible:t,grade:s});var a={id:this.state.id,name:this.state.assignment_name,points_possible:t,points_earned:this.state.points_earned};this.props.updateWeightGrade(a)}},{key:"onBlur",value:function(e,t){""===e.target.value&&this.setState(Object(A.a)({},t,0)),this.props.saveData()}},{key:"render",value:function(){var e=this;return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{className:"data assignment-field",children:Object(p.jsx)("input",{type:"text",className:"assignment-input",value:this.state.assignment_name,onChange:this.updateAssignmentName,onBlur:function(){return e.props.saveData()}})}),Object(p.jsx)("td",{className:"data points-earned-field",children:Object(p.jsx)("input",{type:"number",className:"points-earned-input",value:this.state.points_earned,onChange:this.updatePointsEarned,onBlur:function(t){return e.onBlur(t,"points_earned")}})}),Object(p.jsx)("td",{className:"data points-possible-field",children:Object(p.jsx)("input",{type:"number",className:"points-possible-input",value:this.state.points_possible,onChange:this.updatePointsPossible,onBlur:function(t){return e.onBlur(t,"points_possible")}})}),Object(p.jsxs)("td",{className:"data grade-field",children:[Math.round(this.state.grade),"%"]}),Object(p.jsx)("td",{className:"data trashField deleteAssignmentField",children:Object(p.jsx)("button",{className:"deleteAssignmentButton",onClick:function(t){return e.props.deleteAssignment(t,e.state.id)},children:Object(p.jsx)(G.a,{icon:W.f})})})]})})}}]),s}(n.a.Component));function P(e){var t={r:54,g:222,b:54},s=100-e;if(e<99)if(t.r+14*s<=222)t.r+=14*s;else{t.r=222;var a=14*s-168;t.g-=a/2.5}return"rgba("+t.r+", "+t.g+", "+t.b+", 1.0)"}s(66);var E,T=function(e){Object(O.a)(s,e);var t=Object(f.a)(s);function s(e){var a;return Object(m.a)(this,s),(a=t.call(this,e)).state={id:a.props.weightGroup.id,weight:a.props.weightGroup.weight,assignments:a.props.weightGroup.assignments,grade:a.props.weightGroup.grade,name:a.props.weightGroup.name,new_assignment:"",new_points_earned:"",new_points_possible:"",new_grade:""},a.setWeight=a.setWeight.bind(Object(v.a)(a)),a.setNewPointsEarned=a.setNewPointsEarned.bind(Object(v.a)(a)),a.setNewPointsPossible=a.setNewPointsPossible.bind(Object(v.a)(a)),a.setNewAssignment=a.setNewAssignment.bind(Object(v.a)(a)),a.updateGrade=a.updateGrade.bind(Object(v.a)(a)),a.addNewAssignment=a.addNewAssignment.bind(Object(v.a)(a)),a.weightOnBlur=a.weightOnBlur.bind(Object(v.a)(a)),a.weightNameOnBlur=a.weightNameOnBlur.bind(Object(v.a)(a)),a.deleteSelf=a.deleteSelf.bind(Object(v.a)(a)),a.setWeightGroupName=a.setWeightGroupName.bind(Object(v.a)(a)),a.deleteAssignment=a.deleteAssignment.bind(Object(v.a)(a)),a.modalContainer=n.a.createRef(),a}return Object(j.a)(s,[{key:"componentDidUpdate",value:function(e,t){this.props.weightGroup!==e.weightGroup&&this.setState({id:this.props.weightGroup.id,weight:this.props.weightGroup.weight,assignments:this.props.weightGroup.assignments,grade:this.props.weightGroup.grade,name:this.props.weightGroup.name})}},{key:"setWeightGroupName",value:function(e){this.setState({name:e.target.value})}},{key:"setWeight",value:function(e){var t=e.target.value;this.setState({weight:t});var s={id:this.state.id,name:this.props.weightGroup.name,grade:this.state.grade,assignments:this.state.assignments,weight:t};this.props.updateTotalGrade(s,this.state.id)}},{key:"setNewPointsEarned",value:function(e){this.setState({new_points_earned:e.target.value})}},{key:"setNewPointsPossible",value:function(e){this.setState({new_points_possible:e.target.value})}},{key:"setNewAssignment",value:function(e){this.setState({new_assignment:e.target.value})}},{key:"deleteSelf",value:function(){this.modalContainer.current.closeModal(),this.props.deleteWeightGroup(this.state.id)}},{key:"updateGrade",value:function(e){var t=this.state.assignments;t[e.id]={name:e.name,points_earned:e.points_earned,points_possible:e.points_possible};for(var s=0,a=0,n=0;n<t.length;n++){var i=t[n].points_earned,r=t[n].points_possible;isNaN(i)&&(i=0),isNaN(r)&&(r=1),s+=i,a+=r}var o=s/a*100;this.setState({assignments:t,grade:o});var c={id:this.state.id,name:this.props.weightGroup.name,grade:o,weight:this.state.weight,assignments:t};this.props.updateTotalGrade(c,this.state.id)}},{key:"addNewAssignment",value:function(){if(""!==this.state.new_assignment&&""!==this.state.new_points_earned&&""!==this.state.new_points_possible){var e=this.state.assignments,t={name:this.state.new_assignment,points_earned:parseInt(this.state.new_points_earned),points_possible:parseInt(this.state.new_points_possible)};e.push(t);for(var s=0,a=0,n=0;n<e.length;n++)s+=e[n].points_earned,a+=e[n].points_possible;var i=s/a*100;this.setState({assignments:e,grade:i,new_assignment:"",new_points_earned:"",new_points_possible:""});var r={id:this.state.id,name:this.props.weightGroup.name,grade:i,weight:this.state.weight,assignments:e};this.props.updateTotalGrade(r,this.state.id),this.props.saveData()}}},{key:"deleteAssignment",value:function(e,t){var s=this.state.assignments;s.splice(t,1);for(var a=0,n=0,i=0;i<s.length;i++)a+=s[i].points_earned,n+=s[i].points_possible;var r=t>0?a/n*100:0;this.setState({assignments:s,grade:r});var o={id:this.state.id,name:this.state.name,grade:r,weight:this.state.weight,assignments:s};this.props.updateTotalGrade(o,this.state.id),this.props.saveData()}},{key:"weightNameOnBlur",value:function(e){if(""===e.target.value)this.setState({name:this.props.weightGroup.name});else{var t={id:this.state.id,name:this.state.name,grade:this.state.grade,weight:this.state.weight,assignments:this.state.assignments};this.props.updateTotalGrade(t,this.state.id),this.props.saveData()}}},{key:"weightOnBlur",value:function(e){""===e.target.value&&this.setState({weight:0}),this.props.saveData()}},{key:"render",value:function(){var e=this,t=this,s=this.state.assignments;return Object(p.jsxs)("div",{className:"TableView",children:[Object(p.jsxs)("div",{id:"table-top",children:[Object(p.jsx)("input",{type:"text",className:"weightGroupName",value:this.state.name,onChange:this.setWeightGroupName,onBlur:this.weightNameOnBlur}),Object(p.jsxs)(S,{triggerText:Object(p.jsx)(G.a,{icon:W.e}),buttonStyle:"delete_button",ref:this.modalContainer,children:[Object(p.jsxs)("div",{id:"modal_header",children:[Object(p.jsx)("h2",{id:"form_title",children:"Are you sure?"}),Object(p.jsx)("button",{onClick:function(){return e.modalContainer.current.closeModal()},id:"exit_button",children:Object(p.jsx)(G.a,{icon:W.e})})]}),Object(p.jsx)("p",{children:"Once you delete the weight group you will lose it forever. There is no going back from this decision."}),Object(p.jsx)("div",{className:"button_container",children:Object(p.jsx)("button",{className:"deleteWeightButton",onClick:this.deleteSelf,children:"Delete Forever"})})]})]}),Object(p.jsx)("table",{className:"weightTable",children:Object(p.jsxs)("tbody",{children:[Object(p.jsxs)("tr",{id:"header-row",children:[Object(p.jsx)("th",{id:"assignment-header",className:"assignment-field",children:"Assignment Name"}),Object(p.jsx)("th",{className:"points-earned-field",children:"Points Earned"}),Object(p.jsx)("th",{className:"points-possible-field",children:"Points Possible"}),Object(p.jsx)("th",{id:"grade-header",className:"grade-field",children:"Grade"}),Object(p.jsx)("th",{className:"deleteAssignmentField"})]}),this.state.assignments.map((function(e,a){return Object(p.jsx)(M,{assignment:e,updateWeightGrade:t.updateGrade,id:s.indexOf(e),saveData:t.props.saveData,deleteAssignment:t.deleteAssignment},a)})),Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{className:"data assignment-field",children:Object(p.jsx)("input",{type:"text",className:"new-assignment-input",value:this.state.new_assignment,onChange:this.setNewAssignment})}),Object(p.jsx)("td",{className:"data points-earned-field",children:Object(p.jsx)("input",{type:"number",className:"new-points-earned-input",value:this.state.new_points_earned,onChange:this.setNewPointsEarned})}),Object(p.jsx)("td",{className:"data points-possible-field",children:Object(p.jsx)("input",{type:"number",className:"new-points-possible-input",value:this.state.new_points_possible,onChange:this.setNewPointsPossible})}),Object(p.jsx)("td",{className:"data grade-field",children:Object(p.jsx)("button",{className:"add-new-assignment",onClick:this.addNewAssignment,children:Object(p.jsx)(G.a,{icon:W.a,className:"add-new-assignment-text"})})}),Object(p.jsx)("td",{className:"data deleteAssignmentField"})]})]})}),Object(p.jsxs)("div",{id:"table-bottom",children:[Object(p.jsxs)("div",{id:"weight-input-container",children:[Object(p.jsx)("h3",{id:"table-footer",children:"Weight"}),Object(p.jsx)("input",{type:"text",className:"weight-input",value:this.state.weight,onChange:this.setWeight,onBlur:this.weightOnBlur})]}),Object(p.jsxs)("h3",{id:"weight-grade",style:{backgroundColor:P(this.state.grade)},children:[Math.round(this.state.grade),"%"]})]})]})}}]),s}(n.a.Component),I=(s(67),function(e){return Object(p.jsx)("div",{className:e.type,children:e.text})}),V=(s(68),function(e){Object(O.a)(s,e);var t=Object(f.a)(s);function s(e){var a;return Object(m.a)(this,s),(a=t.call(this,e)).state={newWeightGroupValue:"",showErrorMessage:!1},a.handleChange=a.handleChange.bind(Object(v.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(v.a)(a)),a.modalContainer=n.a.createRef(),a}return Object(j.a)(s,[{key:"handleChange",value:function(e){this.setState({newWeightGroupValue:e.target.value})}},{key:"handleSubmit",value:function(e){for(var t=this.props.weightGroups,s=!1,a=0;a<t.length;a++)t[a].name===this.state.newWeightGroupValue&&(s=!0,this.setState({showErrorMessage:!0}),e.preventDefault());if(!s){this.modalContainer.current.closeModal();var n={name:this.state.newWeightGroupValue,id:t.length,grade:100,weight:0,assignments:[{name:"Example Assignment",points_earned:20,points_possible:20}]};this.setState({newWeightGroupValue:""}),this.props.addWeight(n),e.preventDefault()}}},{key:"closeErrorMessage",value:function(){}},{key:"render",value:function(){var e=this;return Object(p.jsxs)(S,{triggerText:"Add Weight Group",onSubmit:this.handleSubmit,buttonStyle:"add_class_weight",ref:this.modalContainer,children:[Object(p.jsxs)("div",{id:"modal_header",children:[Object(p.jsx)("h2",{id:"form_title",children:"Add a Weight Group"}),Object(p.jsx)("button",{onClick:function(){return e.modalContainer.current.closeModal()},id:"exit_button",children:Object(p.jsx)(G.a,{icon:W.e})})]}),Object(p.jsxs)("form",{onSubmit:this.handleSubmit,id:"class_form",children:[Object(p.jsxs)("label",{children:[Object(p.jsxs)("span",{id:"input_title",children:["Weight Group Name",Object(p.jsx)("br",{})]}),Object(p.jsx)("input",{type:"text",id:"class_name_input",value:this.state.newWeightGroupValue,placeholder:"Ex. Quizzes",onChange:this.handleChange})]}),Object(p.jsx)("input",{type:"submit",value:"Finish",className:"finishButton",id:"submit"})]}),this.state.alreadyContains&&Object(p.jsx)(I,{text:"Please use a unique name. You can't have multiple weight groups with the same name.",type:"modalError"})]})}}]),s}(n.a.Component)),L=(s(69),function(e){Object(O.a)(s,e);var t=Object(f.a)(s);function s(e){var a;return Object(m.a)(this,s),(a=t.call(this,e)).state={className:a.props.name,cachedClassName:a.props.name},a.handleChange=a.handleChange.bind(Object(v.a)(a)),a.onBlur=a.onBlur.bind(Object(v.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(v.a)(a)),a.deleteClass=a.deleteClass.bind(Object(v.a)(a)),a.modalContainer=n.a.createRef(),a}return Object(j.a)(s,[{key:"componentDidUpdate",value:function(e,t){this.props.name!==e.name&&this.setState({className:this.props.name,cachedClassName:this.props.name})}},{key:"handleChange",value:function(e){this.setState({className:e.target.value})}},{key:"onBlur",value:function(e){""===e.target.value&&this.setState({className:this.state.cachedClassName})}},{key:"handleSubmit",value:function(e){this.modalContainer.current.closeModal(),this.state.className!==this.state.cachedClassName&&this.props.editClassName(this.state.cachedClassName,this.state.className),e.preventDefault()}},{key:"deleteClass",value:function(e){this.modalContainer.current.closeModal(),this.props.deleteSelf(),e.preventDefault()}},{key:"render",value:function(){var e=this;return Object(p.jsxs)(S,{triggerText:Object(p.jsx)(G.a,{icon:W.b}),buttonStyle:"editClassButton",ref:this.modalContainer,children:[Object(p.jsxs)("div",{id:"modal_header",children:[Object(p.jsx)("h2",{id:"form_title",children:"Edit Class"}),Object(p.jsx)("button",{onClick:function(){return e.modalContainer.current.closeModal()},id:"exit_button",children:Object(p.jsx)(G.a,{icon:W.e})})]}),Object(p.jsxs)("span",{id:"input_title",children:["Class Name",Object(p.jsx)("br",{})]}),Object(p.jsx)("input",{type:"text",id:"class_name_input",value:this.state.className,onChange:this.handleChange,onBlur:this.onBlur}),Object(p.jsxs)("div",{className:"submitContainer",children:[Object(p.jsx)("button",{className:"deleteWeightButton",onClick:this.deleteClass,children:"Delete Class"}),Object(p.jsx)("button",{className:"finishButton",onClick:this.handleSubmit,children:"Change Name"})]})]})}}]),s}(n.a.Component)),z=(s(38),function(e){Object(O.a)(s,e);var t=Object(f.a)(s);function s(e){var a;return Object(m.a)(this,s),(a=t.call(this,e)).state={course:a.props.course},a.updateGrade=a.updateGrade.bind(Object(v.a)(a)),a.addClassWeight=a.addClassWeight.bind(Object(v.a)(a)),a.editClassName=a.editClassName.bind(Object(v.a)(a)),a.deleteSelf=a.deleteSelf.bind(Object(v.a)(a)),a}return Object(j.a)(s,[{key:"componentDidUpdate",value:function(e){this.props.course!==e.course&&this.setState({course:this.props.course})}},{key:"addClassWeight",value:function(e){var t=this.state.course.weight_groups;t.push(e);var s=this.state.course;s.weight_groups=t,this.setState({course:s})}},{key:"updateGrade",value:function(e,t){var s=this.state.course.weight_groups;s[t]=e;for(var a=0,n=0;n<s.length;n++){var i=s[n].weight;a+=s[n].grade*(i/100)}var r=this.state.course;r.weight_groups=s,r.grade=Math.round(a),this.setState({course:r})}},{key:"deleteSelf",value:function(){this.props.deleteClass(this.state.course)}},{key:"editClassName",value:function(e,t){var s=this.state.course;s.name=t,this.setState({course:s}),this.props.editClassName(e,t)}},{key:"render",value:function(){var e=this,t=this;return Object(p.jsxs)("div",{id:"container",children:[Object(p.jsxs)("div",{className:"gradeDisplayContainer",children:[Object(p.jsx)("div",{className:"gradeDisplayCol"}),Object(p.jsx)("div",{className:"gradeDisplayCol",children:Object(p.jsxs)("h2",{className:"GradeDisplay",style:{color:P(this.state.course.grade),borderColor:P(this.state.course.grade)},children:[Math.round(this.state.course.grade),"%"]})}),Object(p.jsx)("div",{className:"gradeDisplayCol editClassContainer",children:Object(p.jsx)(L,{editClassName:this.props.editClassName,deleteSelf:this.deleteSelf,name:this.state.course.name})})]}),Object(p.jsx)(V,{addWeight:this.addClassWeight,weightGroups:this.state.course.weight_groups}),this.state.course.weight_groups&&Object(p.jsx)("div",{className:"tableViewContainer",children:this.state.course.weight_groups.map((function(s){return Object(p.jsx)(T,{className:"table-view",weightGroup:s,wid:s.id,saveData:e.props.saveData,deleteWeightGroup:e.props.deleteWeightGroup,updateTotalGrade:t.updateGrade},s.id)}))})]})}}]),s}(n.a.Component)),F=function(e){Object(O.a)(s,e);var t=Object(f.a)(s);function s(e){var a;return Object(m.a)(this,s),(a=t.call(this,e))._isMounted=!1,a.state={uid:null,hasClasses:!1,classes:[],course:{},cachedCourse:{},writes:0},a.addClass=a.addClass.bind(Object(v.a)(a)),a.setCurCourse=a.setCurCourse.bind(Object(v.a)(a)),a.updateGrade=a.updateGrade.bind(Object(v.a)(a)),a.deleteWeightGroup=a.deleteWeightGroup.bind(Object(v.a)(a)),a.editClassName=a.editClassName.bind(Object(v.a)(a)),a.deleteClass=a.deleteClass.bind(Object(v.a)(a)),a.saveData=a.saveData.bind(Object(v.a)(a)),a}return Object(j.a)(s,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,this.authSubscription=l.onAuthStateChanged((function(t){t&&e._isMounted&&(e.setState({uid:t.uid}),(E=d.collection("users").doc(t.uid)).collection("classes").get().then((function(t){if(t.size>0){e.setState({hasClasses:!0});var s=[];t.forEach((function(e){s.push(e.id)})),e.setState({classes:s,curClassName:s[0]});var a=s[0],n=e;E.collection("classes").doc(a).get().then((function(e){n.setState({course:e.data(),cachedCourse:e.data()})}))}else e.setState({hasClasses:!1})})))}))}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"saveData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.course.name;this.state.course!==this.state.cachedCourse&&this.state.writes<5e3&&this.setState({cachedCourse:this.state.course,writes:this.state.writes+1}),d.collection("users").doc(this.state.uid).collection("classes").doc(e).set(this.state.course)}},{key:"addClass",value:function(e){!0===this.state.hasClasses&&this.saveData();var t=this.state.classes;t.push(e),this.setState({hasClasses:!0,curClassName:e,classes:t,course:{name:e,grade:100,weight_groups:[{id:0,name:"Homework",grade:100,weight:100,assignments:[{name:"Example Assignment",points_earned:20,points_possible:20}]}]}})}},{key:"addClassWeight",value:function(e){var t=this.state.course.weight_groups;t.push(e);for(var s=0,a=0;a<t.length;a++)s+=t[a].grade*(t[a].weight/100);var n=this.state.course;n.weight_groups=t,n.grade=s,this.setState({course:n})}},{key:"updateGrade",value:function(e,t){var s=this.state.course.weight_groups;s[t]=e;for(var a=0,n=0;n<s.length;n++)a+=s[n].grade*(s[n].weight/100);var i=this.state.course;i.weight_groups=s,i.grade=a,console.log(JSON.stringify(i)),this.setState({course:i})}},{key:"setCurCourse",value:function(){var e=Object(g.a)(x.a.mark((function e(t){var s,a,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.saveData(),s=d.collection("users").doc(this.state.uid).collection("classes").doc(t.target.value),e.next=4,s.get();case 4:return a=e.sent,n=a.data(),e.next=8,this.setState({course:n});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteWeightGroup",value:function(e){var t=this.state.course.weight_groups;t.splice(e,1);var s=this.state.course;s.weight_groups=t,this.setState({course:s}),this.saveData()}},{key:"editClassName",value:function(){var e=Object(g.a)(x.a.mark((function e(t,s){var a,n,i;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.state.classes,n=a.indexOf(t),a[n]=s,(i=this.state.course).name=s,this.setState({classes:a,course:i}),e.next=8,d.collection("users").doc(this.state.uid).collection("classes").doc(s).set(i);case 8:return e.sent,e.next=11,d.collection("users").doc(this.state.uid).collection("classes").doc(t).delete();case 11:e.sent;case 12:case"end":return e.stop()}}),e,this)})));return function(t,s){return e.apply(this,arguments)}}()},{key:"deleteClass",value:function(){var e=Object(g.a)(x.a.mark((function e(t){var s,a,n,i,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.collection("users").doc(this.state.uid).collection("classes").doc(t.name).delete();case 2:if(e.sent,(s=this.state.classes).splice(s.indexOf(t.name),1),0!==s.length){e.next=9;break}this.setState({course:{},classes:s,hasClasses:!1,cachedCourse:{}}),e.next=16;break;case 9:return a=s[0],n=d.collection("users").doc(this.state.uid).collection("classes").doc(a),e.next=13,n.get();case 13:i=e.sent,r=i.data(),this.setState({course:r,classes:s,cachedCourse:r});case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(p.jsxs)("div",{className:"UserClasses",children:[Object(p.jsx)(D,{addClass:this.addClass}),!this.state.hasClasses&&Object(p.jsx)("div",{id:"container",children:Object(p.jsx)("div",{className:"blurb noClassBlurb",id:"message-blurb",children:Object(p.jsx)("p",{className:"blurb-text",children:"It looks like you don\u2019t have any classes yet! Let\u2019s add one to get started."})})}),this.state.hasClasses&&Object(p.jsxs)("div",{id:"container",children:[Object(p.jsx)(B,{classes:this.state.classes,curClass:this.state.course.name,setCurClass:this.setCurCourse}),Object(p.jsx)(z,{course:this.state.course,saveData:this.saveData,deleteWeightGroup:this.deleteWeightGroup,deleteClass:this.deleteClass,editClassName:this.editClassName},this.state.course)]})]})}}]),s}(n.a.Component),R=s(29);r.a.render(Object(p.jsx)(R.a,{children:Object(p.jsxs)(h.c,{children:[Object(p.jsx)(h.a,{exact:!0,path:"/",component:function(){var e=function(){var e=Object(a.useState)({width:void 0,height:void 0}),t=Object(o.a)(e,2),s=t[0],n=t[1];return Object(a.useEffect)((function(){function e(){n({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),s}().width;return console.log(e),Object(p.jsxs)("div",{className:"App",children:[e>450&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("h1",{className:"blurbHeader",children:"Grade Monitor"}),Object(p.jsxs)("div",{className:"blurb signInBlurb",children:[Object(p.jsx)("p",{className:"blurb-text signInBlurbText",children:"Welcome to Grade Monitor. Enter your classes weighting and your assignments to dynamically see your current grade in the class and save it. You can come back throughout the semester to update your grades and see your current standing."}),Object(p.jsx)(b,{})]})]}),e<=450&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("div",{className:"blurb signInBlurb",children:[Object(p.jsx)("h1",{className:"blurbHeader",children:"Grade Monitor"}),Object(p.jsx)("p",{className:"blurb-text signInBlurbText",children:"Login to start tracking your grades."})]}),Object(p.jsx)(b,{})]})]})}}),Object(p.jsx)(h.a,{path:"/classes",component:F})]})}),document.getElementById("root"))}},[[70,1,2]]]);
//# sourceMappingURL=main.d9ff69a6.chunk.js.map